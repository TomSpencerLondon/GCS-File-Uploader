Windows Laptop people or old mac guys with amd based processors:
docker build -t gcswebapp .

Mac M2 Laptop, use below command:
docker buildx build --platform linux/amd64 -t gcswebapp .

Step 1 - Build image
docker buildx build --platform linux/amd64 -t gcswebapp .

Step 2 - Run container
docker run -p 8080:8080 gcswebapp

Step 3 - Docker exec to container
docker exec -it 65586 /bin/bash

Step 4 - Tag docker image to publish to GCR
docker tag <IMAGENAME>:<TAGNAME> gcr.io/<PROJECTID>/<IMAGENAME>:<TAGNAME>
docker tag gcswebapp:latest gcr.io/devops-rnd-383110/gcswebapp:latest

Step 5 One time setup for GCR:
gcloud auth configure-docker

Step 6 - Push docker image to GCR
docker image push gcr.io/<PROJECTID>/<IMAGENAME>:<TAGNAME>
docker image push gcr.io/devops-rnd-383110/gcswebapp:latest

Step 7 - Run docker image from GCR (verify can pull and run image
docker run -ti --rm -p <HOSTPORT>:<CONTAINERPORT> gcr.io/<PROJECTID>/<IMAGENAME>:<TAGNAME>
docker run -ti --rm -p 8080:8080 \
            gcr.io/devops-rnd-383110/gcswebapp:latest


### Notes on config for GCP
- the default region is us-central1
- cat .config/gcloud/configurations/config_default shows the set region of the project
- We have seen how to set the region:
    - gcloud config set compute/region us-central1
- We were successful in getting the sha value for the image on GCR
    - gcloud container images list-tags --format="get(digest,digest[7:])" IMAGE-NAME
    - but we couldn't work out how to get the region from the sha value
- This is what the sha contains:
gcloud container images describe gcr.io/devops-rnd-383110/gcswebapp@sha256:7f538d912ed11db461b3260576490ce6e6ae78347783e7c514c20ef471cfea19
image_summary:
  digest: sha256:7f538d912ed11db461b3260576490ce6e6ae78347783e7c514c20ef471cfea19
  fully_qualified_digest: gcr.io/devops-rnd-383110/gcswebapp@sha256:7f538d912ed11db461b3260576490ce6e6ae78347783e7c514c20ef471cfea19
  registry: gcr.io
  repository: devops-rnd-383110/gcswebapp

Plan for next week:
- learn kubernetes - how to deploy spring boot app to kubernetes
